{% extends 'base.html' %}

{% load static %}
{% block head %}
<title>Letter Search - Results</title>
{% endblock %}

{% block hr %}
<script src="{% static "db/script.js" %}"></script>
<script src="{% static "db/csv_controller.js" %}"></script>
<div class="header-right">
    <a href="{% url 'db:index' %}">Home</a>
    <a class="active" href="{% url 'db:search' %}">Search</a>
    <a href="{% url 'db:upload' %}">Upload</a>
    <a href="{% url 'db:labels' %}">Metadata</a>
    <a onclick="return logout()" id="logout">Logout</a>
</div>
{% endblock %}

{% block body %}

<div class="main">
    <!--{% if values %}
      <button class="bt-download" onclick="to_csv()">Download as CSV</button>
      {% endif %}-->
    <h1>Results</h1>
    {% if values %}
    <div class="preview-results">
    <table id="results_table" class="results_table">
        {% if header %}
        <tr>
            {% for h in header %}
            <th>{{h}}</th>
            {% endfor %}
        </tr>
        {% endif %}
        {% if values %}
            {% for value in values %}
            <tr>
                {% for v in value %}
                    {% if forloop.counter0 == 7 %}
                        <td>
                            <a href="/db/edit/{{v}}/">Modify</a>
                        </td>
                    {% else %}
                        <td>{{v}}</td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        {% endif %}
    </table>
  </div>
    {% else %}
        <p>No results.</p>
    {% endif %}
    <br>
    <!-- <div class="footer"> -->
        <div class="download-button">
            <button class="bt-discard" onclick="backToSearch()">Back To Search</button>
            <button class="bt-upload" onclick="sortTable()">Sort By Archive Number</button>
            <button class="bt-download" onclick="toCsv()">Download as CSV</button>
        </div>
        <br>
    <!-- </div> -->
    {% endblock %}
</div>
